<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>D3 Practice with Example</title>
        <!-- D3 version5 mini -->
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <style>
            .btn:hover {
                background-color: orange;
            }
        </style>
    </head>
    <body>
        <h1>D3 example</h1>
        <!-- <svg id="plot" width="400" height="100"></svg> -->
        <g id="btngroup">
            <button class="btn" id="render-btn">Render</button>
            <button class="btn" id="change-btn">Change</button>
            <button class="btn" id="add-btn">Add</button>
            <button class="btn" id="remove-btn">Remove</button>
        </g>
        <p>existed p</p>
        <g id="pgroup"></g>
        
        <script>
            "use strict";
            let arr1 = [1,3,2];
            let arr2 = [1,2];
            // d3.select("body").selectAll("p")
            //   .data(array)
            //   .enter().append("p")
            //     .text("hi sella!");

            function renderP(data) {
                //Bind & Enter
                var ps = d3.select("#pgroup").selectAll("p")
                    .data(arr1)
                    .enter().append("p")
                    .text(function(d) {
                        return "Number " + d + "!";
                    })
                    .style("color", "blue")
                    .style("font-size", "1em");
                
                //Update
                // ps.transition().duration(2000)
                //     .style("color", "red")
                //     .style("font-size", function(d) {return d + "em"; });
                
                //Exit
                ps.exit().remove();
            }

            function update() {
                var ps = d3.select("#pgroup").selectAll("p")
                    .transition().duration(2000)
                    .style("color", "red")
                    .style("font-size", function(d) {return d + "em"; });
            }

            // renderP(arr1);
            // update(arr2);

            d3.select("#render-btn").on("click", renderP);
            d3.select("#change-btn").on("click", update);

            d3.select("#add-btn").on("click", function(){
                var ps = d3.select("#pgroup")
                    .append("p")
                    .text("added p!")
                    .style("font-size", "1em");
                ps.exit().remove();
            });

            d3.select("#remove-btn").on("click", function(){
                d3.select("#pgroup").select("p").remove();
            });

            //can add DOM element new button from here
            d3.select("#btngroup").append("button")
                .text("RemoveAll").on("click", function(){
                    d3.select("#pgroup").selectAll("p").remove();
                });

            //Mouseover and Mouseout event
            d3.selectAll("p").on("mouseover", function(){
                d3.select(this).style("background-color", "green");
            });
            d3.selectAll("p").on("mouseout", function(){
                d3.select(this).style("background-color", "transparent");
            });
        </script>

    </body>
</html>